(function(l){var B,j,z,r,c,y,v,D,u,i,g=0,x={},h=[],d=0,a={},e=[],k=null,C=new Image(),t=/\.(jpg|gif|png|bmp|jpeg)(.*)?$/i,p=/[^\.]\.(swf)\s*$/i,m,o=1,q=0,b="",s,n,A=false,f=l.extend(l("<div/>")[0],{prop:0}),w=false;_abort=function(){j.hide();C.onerror=C.onload=null;if(k){k.abort()}B.empty()},_error=function(){if(false===x.onError(h,g,x)){j.hide();A=false;return}x.titleShow=false;x.width="auto";x.height="auto";B.html('<p id="fancybox-error">The requested content cannot be loaded.<br />Please try again later.</p>');_process_inline()},_start=function(){var I=h[g],F,H,K,J,E,G;_abort();x=l.extend({},l.fn.fancybox.defaults,(typeof l(I).data("fancybox")=="undefined"?x:l(I).data("fancybox")));G=x.onStart(h,g,x);if(G===false){A=false;return}else{if(typeof G=="object"){x=l.extend(x,G)}}K=x.title||(I.nodeName?l(I).attr("title"):I.title)||"";if(I.nodeName&&!x.orig){x.orig=l(I).children("img:first").length?l(I).children("img:first"):l(I)}if(K===""&&x.orig&&x.titleFromAlt){K=x.orig.attr("alt")}F=x.href||(I.nodeName?l(I).attr("href"):I.href)||null;if((/^(?:javascript)/i).test(F)||F=="#"){F=null}if(x.type){H=x.type;if(!F){F=x.content}}else{if(x.content){H="html"}else{if(F){if(F.match(t)){H="image"}else{if(F.match(p)){H="swf"}else{if(l(I).hasClass("iframe")){H="iframe"}else{if(F.indexOf("#")===0){H="inline"}else{H="ajax"}}}}}}}if(!H){_error();return}if(H=="inline"){I=F.substr(F.indexOf("#"));H=l(I).length>0?"inline":"ajax"}x.type=H;x.href=F;x.title=K;if(x.autoDimensions){if(x.type=="html"||x.type=="inline"||x.type=="ajax"){x.width="auto";x.height="auto"}else{x.autoDimensions=false}}if(x.modal){x.overlayShow=true;x.hideOnOverlayClick=false;x.hideOnContentClick=false;x.enableEscapeButton=false;x.showCloseButton=false}x.padding=parseInt(x.padding,10);x.margin=parseInt(x.margin,10);B.css("padding",(x.padding+x.margin));l(".fancybox-inline-tmp").unbind("fancybox-cancel").bind("fancybox-change",function(){l(this).replaceWith(y.children())});switch(H){case"html":B.html(x.content);_process_inline();break;case"inline":if(l(I).parent().is("#fancybox-content")===true){A=false;return}l('<div class="fancybox-inline-tmp" />').hide().insertBefore(l(I)).bind("fancybox-cleanup",function(){l(this).replaceWith(y.children())}).bind("fancybox-cancel",function(){l(this).replaceWith(B.children())});l(I).appendTo(B);_process_inline();break;case"image":A=false;l.fancybox.showActivity();C=new Image();C.onerror=function(){_error()};C.onload=function(){A=true;C.onerror=C.onload=null;_process_image()};C.src=F;break;case"swf":x.scrolling="no";J='<object classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="'+x.width+'" height="'+x.height+'"><param name="movie" value="'+F+'"></param>';E="";l.each(x.swf,function(L,M){J+='<param name="'+L+'" value="'+M+'"></param>';E+=" "+L+'="'+M+'"'});J+='<embed src="'+F+'" type="application/x-shockwave-flash" width="'+x.width+'" height="'+x.height+'"'+E+"></embed></object>";B.html(J);_process_inline();break;case"ajax":A=false;l.fancybox.showActivity();x.ajax.win=x.ajax.success;k=l.ajax(l.extend({},x.ajax,{url:F,data:x.ajax.data||{},error:function(L,N,M){if(L.status>0){_error()}},success:function(M,O,L){var N=typeof L=="object"?L:k;if(N.status==200){if(typeof x.ajax.win=="function"){G=x.ajax.win(F,M,O,L);if(G===false){j.hide();return}else{if(typeof G=="string"||typeof G=="object"){M=G}}}B.html(M);_process_inline()}}}));break;case"iframe":_show();break}},_process_inline=function(){var E=x.width,F=x.height;if(E.toString().indexOf("%")>-1){E=parseInt((l(window).width()-(x.margin*2))*parseFloat(E)/100,10)+"px"}else{E=E=="auto"?"auto":E+"px"}if(F.toString().indexOf("%")>-1){F=parseInt((l(window).height()-(x.margin*2))*parseFloat(F)/100,10)+"px"}else{F=F=="auto"?"auto":F+"px"}B.wrapInner('<div style="width:'+E+";height:"+F+";overflow: "+(x.scrolling=="auto"?"auto":(x.scrolling=="yes"?"scroll":"hidden"))+';position:relative;"></div>');x.width=B.width();x.height=B.height();_show()},_process_image=function(){x.width=C.width;x.height=C.height;l("<img />").attr({id:"fancybox-img",src:C.src,alt:x.title}).appendTo(B);_show()},_show=function(){var F,E;j.hide();if(r.is(":visible")&&false===a.onCleanup(e,d,a)){l.event.trigger("fancybox-cancel");A=false;return}A=true;l(y.add(z)).unbind();l(window).unbind("resize.fb scroll.fb");l(document).unbind("keydown.fb");if(r.is(":visible")&&a.titlePosition!=="outside"){r.css("height",r.height())}e=h;d=g;a=x;if(a.overlayShow){z.css({"background-color":a.overlayColor,opacity:a.overlayOpacity,cursor:a.hideOnOverlayClick?"pointer":"auto",height:l(document).height()});if(!z.is(":visible")){if(w){l("select:not(#fancybox-tmp select)").filter(function(){return this.style.visibility!=="hidden"}).css({visibility:"hidden"}).one("fancybox-cleanup",function(){this.style.visibility="inherit"})}z.show()}}else{z.hide()}n=_get_zoom_to();_process_title();if(r.is(":visible")){l(v.add(u).add(i)).hide();F=r.position(),s={top:F.top,left:F.left,width:r.width(),height:r.height()};E=(s.width==n.width&&s.height==n.height);y.fadeTo(a.changeFade,0.3,function(){var G=function(){y.html(B.contents()).fadeTo(a.changeFade,1,_finish)};l.event.trigger("fancybox-change");y.empty().removeAttr("filter").css({"border-width":a.padding,width:n.width-a.padding*2,height:x.autoDimensions?"auto":n.height-q-a.padding*2});if(E){G()}else{f.prop=0;l(f).animate({prop:1},{duration:a.changeSpeed,easing:a.easingChange,step:_draw,complete:G})}});return}r.removeAttr("style");y.css("border-width",a.padding);if(a.transitionIn=="elastic"){s=_get_zoom_from();y.html(B.contents());r.show();if(a.opacity){n.opacity=0}f.prop=0;l(f).animate({prop:1},{duration:a.speedIn,easing:a.easingIn,step:_draw,complete:_finish});return}if(a.titlePosition=="inside"&&q>0){D.show()}y.css({width:n.width-a.padding*2,height:x.autoDimensions?"auto":n.height-q-a.padding*2}).html(B.contents());r.css(n).fadeIn(a.transitionIn=="none"?0:a.speedIn,_finish)},_format_title=function(E){if(E&&E.length){if(a.titlePosition=="float"){return'<table id="fancybox-title-float-wrap" cellpadding="0" cellspacing="0"><tr><td id="fancybox-title-float-left"></td><td id="fancybox-title-float-main">'+E+'</td><td id="fancybox-title-float-right"></td></tr></table>'}return'<div id="fancybox-title-'+a.titlePosition+'">'+E+"</div>"}return false},_process_title=function(){b=a.title||"";q=0;D.empty().removeAttr("style").removeClass();if(a.titleShow===false){D.hide();return}b=l.isFunction(a.titleFormat)?a.titleFormat(b,e,d,a):_format_title(b);if(!b||b===""){D.hide();return}D.addClass("fancybox-title-"+a.titlePosition).html(b).appendTo("body").show();switch(a.titlePosition){case"inside":D.css({width:n.width-(a.padding*2),marginLeft:a.padding,marginRight:a.padding});q=D.outerHeight(true);D.appendTo(c);n.height+=q;break;case"over":D.css({marginLeft:a.padding,width:n.width-(a.padding*2),bottom:a.padding}).appendTo(c);break;case"float":D.css("left",parseInt((D.width()-n.width-40)/2,10)*-1).appendTo(r);break;default:D.css({width:n.width-(a.padding*2),paddingLeft:a.padding,paddingRight:a.padding}).appendTo(r);break}D.hide()},_set_navigation=function(){if(a.enableEscapeButton||a.enableKeyboardNav){l(document).bind("keydown.fb",function(E){if(E.keyCode==27&&a.enableEscapeButton){E.preventDefault();l.fancybox.close()}else{if((E.keyCode==37||E.keyCode==39)&&a.enableKeyboardNav&&E.target.tagName!=="INPUT"&&E.target.tagName!=="TEXTAREA"&&E.target.tagName!=="SELECT"){E.preventDefault();l.fancybox[E.keyCode==37?"prev":"next"]()}}})}if(!a.showNavArrows){u.hide();i.hide();return}if((a.cyclic&&e.length>1)||d!==0){u.show()}if((a.cyclic&&e.length>1)||d!=(e.length-1)){i.show()}},_finish=function(){if(!l.support.opacity){y.get(0).style.removeAttribute("filter");r.get(0).style.removeAttribute("filter")}if(x.autoDimensions){y.css("height","auto")}r.css("height","auto");if(b&&b.length){D.show()}if(a.showCloseButton){v.show()}_set_navigation();if(a.hideOnContentClick){y.bind("click",l.fancybox.close)}if(a.hideOnOverlayClick){z.bind("click",l.fancybox.close)}l(window).bind("resize.fb",l.fancybox.resize);if(a.centerOnScroll){l(window).bind("scroll.fb",l.fancybox.center)}if(a.type=="iframe"){l('<iframe id="fancybox-frame" name="fancybox-frame'+new Date().getTime()+'" frameborder="0" hspace="0" '+(l.browser.msie?'allowtransparency="true""':"")+' scrolling="'+x.scrolling+'" src="'+a.href+'"></iframe>').appendTo(y)}r.show();A=false;l.fancybox.center();a.onComplete(e,d,a);_preload_images()},_preload_images=function(){var E,F;if((e.length-1)>d){E=e[d+1].href;if(typeof E!=="undefined"&&E.match(t)){F=new Image();F.src=E}}if(d>0){E=e[d-1].href;if(typeof E!=="undefined"&&E.match(t)){F=new Image();F.src=E}}},_draw=function(F){var E={width:parseInt(s.width+(n.width-s.width)*F,10),height:parseInt(s.height+(n.height-s.height)*F,10),top:parseInt(s.top+(n.top-s.top)*F,10),left:parseInt(s.left+(n.left-s.left)*F,10)};if(typeof n.opacity!=="undefined"){E.opacity=F<0.5?0.5:F}r.css(E);y.css({width:E.width-a.padding*2,height:E.height-(q*F)-a.padding*2})},_get_viewport=function(){return[l(window).width()-(a.margin*2),l(window).height()-(a.margin*2),l(document).scrollLeft()+a.margin,l(document).scrollTop()+a.margin]},_get_zoom_to=function(){var E=_get_viewport(),I={},F=a.autoScale,G=a.padding*2,H;if(a.width.toString().indexOf("%")>-1){I.width=parseInt((E[0]*parseFloat(a.width))/100,10)}else{I.width=a.width+G}if(a.height.toString().indexOf("%")>-1){I.height=parseInt((E[1]*parseFloat(a.height))/100,10)}else{I.height=a.height+G}if(F&&(I.width>E[0]||I.height>E[1])){if(x.type=="image"||x.type=="swf"){H=(a.width)/(a.height);if((I.width)>E[0]){I.width=E[0];I.height=parseInt(((I.width-G)/H)+G,10)}if((I.height)>E[1]){I.height=E[1];I.width=parseInt(((I.height-G)*H)+G,10)}}else{I.width=Math.min(I.width,E[0]);I.height=Math.min(I.height,E[1])}}I.top=parseInt(Math.max(E[3]-20,E[3]+((E[1]-I.height-40)*0.5)),10);I.left=parseInt(Math.max(E[2]-20,E[2]+((E[0]-I.width-40)*0.5)),10);return I},_get_obj_pos=function(E){var F=E.offset();F.top+=parseInt(E.css("paddingTop"),10)||0;F.left+=parseInt(E.css("paddingLeft"),10)||0;F.top+=parseInt(E.css("border-top-width"),10)||0;F.left+=parseInt(E.css("border-left-width"),10)||0;F.width=E.width();F.height=E.height();return F},_get_zoom_from=function(){var H=x.orig?l(x.orig):false,G={},F,E;if(H&&H.length){F=_get_obj_pos(H);G={width:F.width+(a.padding*2),height:F.height+(a.padding*2),top:F.top-a.padding-20,left:F.left-a.padding-20}}else{E=_get_viewport();G={width:a.padding*2,height:a.padding*2,top:parseInt(E[3]+E[1]*0.5,10),left:parseInt(E[2]+E[0]*0.5,10)}}return G},_animate_loading=function(){if(!j.is(":visible")){clearInterval(m);return}l("div",j).css("top",(o*-40)+"px");o=(o+1)%12};l.fn.fancybox=function(E){if(!l(this).length){return this}l(this).data("fancybox",l.extend({},E,(l.metadata?l(this).metadata():{}))).unbind("click.fb").bind("click.fb",function(G){G.preventDefault();if(A){return}A=true;l(this).blur();h=[];g=0;var F=l(this).attr("rel")||"";if(!F||F==""||F==="nofollow"){h.push(this)}else{h=l("a[rel="+F+"], area[rel="+F+"]");g=h.index(this)}_start();return});return this};l.fancybox=function(H){var G;if(A){return}A=true;G=typeof arguments[1]!=="undefined"?arguments[1]:{};h=[];g=parseInt(G.index,10)||0;if(l.isArray(H)){for(var F=0,E=H.length;F<E;F++){if(typeof H[F]=="object"){l(H[F]).data("fancybox",l.extend({},G,H[F]))}else{H[F]=l({}).data("fancybox",l.extend({content:H[F]},G))}}h=jQuery.merge(h,H)}else{if(typeof H=="object"){l(H).data("fancybox",l.extend({},G,H))}else{H=l({}).data("fancybox",l.extend({content:H},G))}h.push(H)}if(g>h.length||g<0){g=0}_start()};l.fancybox.showActivity=function(){clearInterval(m);j.show();m=setInterval(_animate_loading,66)};l.fancybox.hideActivity=function(){j.hide()};l.fancybox.next=function(){return l.fancybox.pos(d+1)};l.fancybox.prev=function(){return l.fancybox.pos(d-1)};l.fancybox.pos=function(E){if(A){return}E=parseInt(E);h=e;if(E>-1&&E<e.length){g=E;_start()}else{if(a.cyclic&&e.length>1){g=E>=e.length?0:e.length-1;_start()}}return};l.fancybox.cancel=function(){if(A){return}A=true;l.event.trigger("fancybox-cancel");_abort();x.onCancel(h,g,x);A=false};l.fancybox.close=function(){if(A||r.is(":hidden")){return}A=true;if(a&&false===a.onCleanup(e,d,a)){A=false;return}_abort();l(v.add(u).add(i)).hide();l(y.add(z)).unbind();l(window).unbind("resize.fb scroll.fb");l(document).unbind("keydown.fb");y.find("iframe").attr("src",w&&/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank");if(a.titlePosition!=="inside"){D.empty()}r.stop();function E(){z.fadeOut("fast");D.empty().hide();r.hide();l.event.trigger("fancybox-cleanup");y.empty();a.onClosed(e,d,a);e=x=[];d=g=0;a=x={};A=false}if(a.transitionOut=="elastic"){s=_get_zoom_from();var F=r.position();n={top:F.top,left:F.left,width:r.width(),height:r.height()};if(a.opacity){n.opacity=1}D.empty().hide();f.prop=1;l(f).animate({prop:0},{duration:a.speedOut,easing:a.easingOut,step:_draw,complete:E})}else{r.fadeOut(a.transitionOut=="none"?0:a.speedOut,E)}};l.fancybox.resize=function(){if(z.is(":visible")){z.css("height",l(document).height())}l.fancybox.center(true)};l.fancybox.center=function(){var E,F;if(A){return}F=arguments[0]===true?1:0;E=_get_viewport();if(!F&&(r.width()>E[0]||r.height()>E[1])){return}r.stop().animate({top:parseInt(Math.max(E[3]-20,E[3]+((E[1]-y.height()-40)*0.5)-a.padding)),left:parseInt(Math.max(E[2]-20,E[2]+((E[0]-y.width()-40)*0.5)-a.padding))},typeof arguments[0]=="number"?arguments[0]:200)};l.fancybox.init=function(){if(l("#fancybox-wrap").length){return}l("body").append(B=l('<div id="fancybox-tmp"></div>'),j=l('<div id="fancybox-loading"><div></div></div>'),z=l('<div id="fancybox-overlay"></div>'),r=l('<div id="fancybox-wrap"></div>'));c=l('<div id="fancybox-outer"></div>').append('<div class="fancybox-bg" id="fancybox-bg-n"></div><div class="fancybox-bg" id="fancybox-bg-ne"></div><div class="fancybox-bg" id="fancybox-bg-e"></div><div class="fancybox-bg" id="fancybox-bg-se"></div><div class="fancybox-bg" id="fancybox-bg-s"></div><div class="fancybox-bg" id="fancybox-bg-sw"></div><div class="fancybox-bg" id="fancybox-bg-w"></div><div class="fancybox-bg" id="fancybox-bg-nw"></div>').appendTo(r);c.append(y=l('<div id="fancybox-content"></div>'),v=l('<a id="fancybox-close"></a>'),D=l('<div id="fancybox-title"></div>'),u=l('<a href="javascript:;" id="fancybox-left"><span class="fancy-ico" id="fancybox-left-ico"></span></a>'),i=l('<a href="javascript:;" id="fancybox-right"><span class="fancy-ico" id="fancybox-right-ico"></span></a>'));v.click(l.fancybox.close);j.click(l.fancybox.cancel);u.click(function(E){E.preventDefault();l.fancybox.prev()});i.click(function(E){E.preventDefault();l.fancybox.next()});if(l.fn.mousewheel){r.bind("mousewheel.fb",function(E,F){if(A){E.preventDefault()}else{if(l(E.target).get(0).clientHeight==0||l(E.target).get(0).scrollHeight===l(E.target).get(0).clientHeight){E.preventDefault();l.fancybox[F>0?"prev":"next"]()}}})}if(!l.support.opacity){r.addClass("fancybox-ie")}if(w){j.addClass("fancybox-ie6");r.addClass("fancybox-ie6");l('<iframe id="fancybox-hide-sel-frame" src="'+(/^https/i.test(window.location.href||"")?"javascript:void(false)":"about:blank")+'" scrolling="no" border="0" frameborder="0" tabindex="-1"></iframe>').prependTo(c)}};l.fn.fancybox.defaults={padding:10,margin:40,opacity:false,modal:false,cyclic:false,scrolling:"auto",width:560,height:340,autoScale:true,autoDimensions:true,centerOnScroll:false,ajax:{},swf:{wmode:"transparent"},hideOnOverlayClick:true,hideOnContentClick:false,overlayShow:true,overlayOpacity:0.7,overlayColor:"#777",titleShow:true,titlePosition:"float",titleFormat:null,titleFromAlt:false,transitionIn:"fade",transitionOut:"fade",speedIn:300,speedOut:300,changeSpeed:300,changeFade:"fast",easingIn:"swing",easingOut:"swing",showCloseButton:true,showNavArrows:true,enableEscapeButton:true,enableKeyboardNav:true,onStart:function(){},onCancel:function(){},onComplete:function(){},onCleanup:function(){},onClosed:function(){},onError:function(){}};l(document).ready(function(){l.fancybox.init()})})(jQuery);